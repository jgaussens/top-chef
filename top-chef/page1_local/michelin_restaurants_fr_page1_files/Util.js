JSEPackage("ViaMichelin.Api.Util"),JSEImportApi("ViaMichelin.Api.Util.Object"),JSEPackage("ViaMichelin.Api.Util.Country"),JSEImportApi("ViaMichelin.Api.Util.Translation"),JSEImportTrl("ViaMichelin.Api.Trl.LandList"),ViaMichelin.Api.Util.Country={ISOArray:{ABW:"200000533",AFG:"200000004",AGO:"2206473",AIA:"200000660",ALB:"1025337",AND:"856",ANT:"2049347",ARE:"1793813",ARG:"2200990",ARM:"1145209",ASM:"200000016",ATA:"200000010",ATF:"200000260",ATG:"200000028",AUS:"1634125",AUT:"106",AZE:"1145205",BDI:"200000108",BEL:"311",BEN:"2206474",BFA:"3000001",BGD:"200000050",BGR:"1025340",BHR:"2204176",BHS:"200000044",BIH:"1025343",BLM:"002046528",BLR:"1794",BLZ:"200000084",BMU:"200000060",BOL:"200000068",BRA:"1653796",BRB:"200000052",BRN:"2191365",BTN:"200000064",BVT:"200000074",BWA:"1793790",CAF:"200000140",CAN:"1145795",CCK:"200000166",CHE:"185",CHL:"3002966",CHN:"200000156",CIV:"200000384",CMR:"2206476",COD:"3000002",COG:"3000003",COK:"200000184",COL:"200000170",COM:"200000174",CPV:"200000132",CRI:"200000188",CUB:"200000192",CXR:"200000162",CYM:"200000136",CYP:"1000043",CZE:"1694",DEU:"240",DJI:"200000262",DMA:"200000212",DNK:"1473",DOM:"200000214",DZA:"1145246",ECU:"200000218",EGY:"1145802",ERI:"200000232",ESH:"200000732",ESP:"844",EST:"1860861",ETH:"200000231",FIN:"1792",FJI:"200000242",FLK:"200000238",FRA:"1424",FSM:"200000583",GAB:"3000004",GBR:"1138",GEO:"1145204",GHA:"2206477",GIN:"200000324",GLP:"1145975",GMB:"200000270",GNB:"200000624",GNQ:"200000226",GRC:"1945835",GRD:"200000308",GRL:"200000304",GTM:"1156433",GUF:"1633888",GUM:"200000316",GUY:"200000328",HKG:"1713973",HMD:"200000334",HND:"200000340",HRV:"1752",HTI:"200000332",HUN:"1741",IDN:"1793788",IND:"200000356",IOT:"200000086",IRL:"919",IRN:"1145208",IRQ:"1145207",ISL:"1006367",ISR:"1157295",ITA:"612",JAM:"200000388",JOR:"200000400",JPN:"200000392",KAZ:"1145206",KEN:"2206478",KGZ:"200000417",KHM:"200000116",KIR:"200000296",KNA:"200000659",KOR:"200000410",KWT:"2204508",LAO:"200000418",LBN:"1145210",LBR:"200000430",LBY:"1145785",LCA:"200000662",LIE:"108",LKA:"200000144",LSO:"1793807",LTU:"1851066",LUX:"247",LVA:"1851089",MAC:"1971850",MAF:"002046529",MAR:"1145281",MCO:"852",MDA:"1025352",MDG:"200000450",MDV:"200000462",MEX:"1145797",MHL:"200000584",MKD:"1025334",MLI:"3000005",MLT:"1145212",MMR:"200000104",MNE:"1713472",MNG:"200000496",MNP:"200000580",MOZ:"1793808",MRT:"3000006",MSR:"200000500",MTQ:"1145977",MUS:"1673459",MWI:"2206479",MYS:"1793787",MYT:"2046527",NAM:"1793809",NCL:"200000540",NER:"200000562",NFK:"200000574",NGA:"2206480",NIC:"200000558",NIU:"200000570",NLD:"285",NOR:"1574",NPL:"200000524",NRU:"200000520",NZL:"200000554",OMN:"2205867",PAK:"200000586",PAN:"200000591",PCN:"200000612",PER:"200000604",PHL:"2191493",PLW:"200000585",PNG:"200000598",POL:"1743",PRI:"200000630",PRK:"200000408",PRT:"669",PRY:"200000600",PYF:"200000258",QAT:"2206098",REU:"1146513",ROU:"1025349",RUS:"1851058",RWA:"200000646",SAU:"1793811",SDN:"200000736",SEN:"3000007",SGP:"1713840",SGS:"200000239",SHN:"200000654",SJM:"200000744",SLB:"200000090",SLE:"200000694",SLV:"200000222",SMR:"318",SOM:"200000706",SPM:"200000666",SRB:"1145200",STP:"200000678",SUR:"200000740",SVK:"1697",SVN:"1746",SWE:"1507",SWZ:"1793812",SYC:"2000185",SYR:"1145211",TCA:"200000796",TCD:"200000148",TGO:"2206481",THA:"1145798",TJK:"200000762",TKL:"200000772",TKM:"200000795",TLS:"200000626",TON:"200000776",TTO:"200000780",TUN:"1145213",TUR:"2059154",TUV:"200000798",TWN:"1971050",TZA:"2206482",UGA:"2206483",UKR:"1749",URY:"2270607",USA:"1145799",UZB:"200000860",VAT:"2066810",VCT:"200000670",VEN:"200000862",VGB:"200000092",VIR:"200000850",VNM:"200000704",VUT:"200000548",WLF:"200000876",WSM:"200000882",YEM:"200000887",ZAF:"1671448",ZMB:"2206484",ZWE:"1793810"},getCountryCodeFromISOCode:function(e){return this.ISOArray[e]?this.ISOArray[e]:""},getISOCodeFromCountryCode:function(e){var t;for(t in this.ISOArray)if(this.ISOArray[t]==e||this.ISOArray[t]==parseInt(e,10))return t;return""},getCountryLabelFromCountryCode:function(e){for(var t=new ViaMichelin.Api.Util.Translation(ViaMichelin.Api.Trl.LandList).getValue("MapLandList"),i=0;i<t.length;i++)if(e==t[i][0])return t[i][1];return""},getCountryLabelFromISOCode:function(e){var t=this.getCountryCodeFromISOCode(e);return this.getCountryLabelFromCountryCode(t)},getSelectHTMLElement:function(e,t){if("undefined"!=typeof this.ISOArray){var i=document.createElement("select");i.name=e,i.id=e;var n;for(n in this.ISOArray)if("Super"!=n){var r=new Option(this.ISOArray[n],this.getISOCodeFromCountryCode(n));i.options[i.options.length]=r,t&&this.getISOCodeFromCountryCode(n)==t&&(i.options[i.options.length-1].selected=!0)}return i}return null},getSelectHTMLString:function(e,t){if("undefined"!=typeof this.ISOArray){var i,n="<SELECT ID='"+e+"' NAME='"+e+"'>";for(i in this.ISOArray){var r="";t&&this.getISOCodeFromCountryCode(i)==t&&(r=" SELECTED"),"Super"!=i&&(n+="<OPTION VALUE='"+i+"'"+r+">"+this.ISOArray[i]+"</OPTION>")}return n+="</SELECT>"}return""}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.Country),ToJSEObject(ViaMichelin.Api.Util.Country),JSEPackage("ViaMichelin.Api.Util.Date"),ViaMichelin.Api.Util.Date={buildDateFromDbString:function(e){if(!$isDefined(e))return e;if("string"!=typeof e)return e;var t,i=/^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2}) ([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})$/,n=/^([0-9]{1,4}):([0-9]{1,2}):([0-9]{1,2}) ([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})$/;try{if(i.test(e))t=i.exec(e);else{if(!n.test(e))return e;t=n.exec(e)}if(null==t)return e;var r=t[1],a=t[2]-1,s=t[3],o=t[4],l=t[5],c=t[6];return new Date(r,a,s,o,l,c)}catch(d){return e}},buildDateFromArray:function(e){if(!(e instanceof Array)||0===e.length)return e;var t=e[0],i=e[1],n=e[2];if(3==e.length)return new Date(t,i,n);var r=e[3],a=e[4],s=e[5];return new Date(t,i,n,r,a,s)},buildDateFromXMLString:function(e){if(!$isDefined(e))return e;if("string"!=typeof e)return e;try{var t=e.split("T"),i=t[0].split("-"),n=i[0],r=parseInt(i[1],10)-1,a=parseInt(i[2],10),s=t[1].split(":"),o=parseInt(s[0],10),l=parseInt(s[1],10),c=parseInt(s[2],10);return new Date(n,r,a,o,l,c)}catch(d){return e}},defaultDate:function(e){return ViaMichelin.Api.Util.Other.dateFormat("d.m.Y",e)},getAgeFromDate:function(e){if(!(e instanceof Date))return 0;var t=new Date;return e.getMonth()<t.getMonth()||e.getMonth()==t.getMonth()&&e.getDate()<=t.getDate()?t.getFullYear()-e.getFullYear():t.getFullYear()-e.getFullYear()-1},format:function(e,t){if(t||(t=new Date),"number"==typeof t){var i=new Date;i.setTime(t),t=i}else"string"==typeof t&&(t=new Date(ViaMichelin.Api.Util.Other.parseDate(t)),isNaN(t)&&(t=new Date(t)));var n=t.getYear();1e3>n&&(n+=1900);var r=t.getHours(),a=t.getDate(),s=t.getMonth()+1,o=t.getMinutes(),l=t.getSeconds(),c=new RegExp("(d|m|Y|H|i|s)","g"),d=[];return d.d=10>a?"0"+a:a,d.m=10>s?"0"+s:s,d.Y=n,d.Y=n,d.H=10>r?"0"+r:r,d.i=10>o?"0"+o:o,d.s=10>l?"0"+l:l,e.replace(c,function(e){return e in d?d[e]:e.slice(1,e.length-1)})}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.Date),ToJSEObject(ViaMichelin.Api.Util.Date),JSEPackage("ViaMichelin.Api.Util.HTML"),JSEImportApi("JSE.HTML"),ViaMichelin.Api.Util.HTML={truncDescription:function(e,t,i){if(i||(i=".."),!e)return"";if(e.length<=t)return e;var n=e.substring(0,t),r=n.lastIndexOf("&"),a=n.lastIndexOf(";");return-1!=r&&r>a&&r>Math.max(0,t-6)&&(n=n.substring(0,n.lastIndexOf("&"))),n+i},adaptableDescription:function(e,t){if("string"==typeof e.innerHTML&&e.innerHTML){var i=e,n=0;null!=e.href&&(i=e.parentNode);var r=parseInt(JSE.HTML.getStyle(i,"marginTop"),10),a=parseInt(JSE.HTML.getStyle(i,"marginBottom"),10),s=parseInt(JSE.HTML.getStyle(i,"paddingTop"),10),o=parseInt(JSE.HTML.getStyle(i,"paddingBottom"),10);n=parseInt(r+a+s+o,10);var l=e.innerHTML,c=JSE.HTML.getStyle(i,"lineHeight");c&&(c=parseInt(c.replace("px","").replace("pt","").replace("e",""),10));for(var d=l.length;d>0;d--){var p=ViaMichelin.Api.Util.HTML.truncDescription(l,d,t);if(e.innerHTML=p,parseInt(i.offsetHeight,10)<=c+n)break}i.style.overflow="hidden",c&&(i.style.height=c+"px"),e.className=e.className.replace(/adaptable/gi,"adapted")}},removeTags:function(e){var t=new RegExp("<.[^<>]*>","gi");return e.replace(t,"")},addClassNameToHTMLElement:function(e,t){ViaMichelin.Api.Util.HTML.isClassNameExistInHTMLElement(e,t)||(e.className=e.className+" "+t)},removeClassNameToHTMLElement:function(e,t){if(t instanceof Array)for(var i in t)$isDefined(t[i])&&(e.className=e.className.replace(t[i],""));else e.className=e.className.replace(t,"")},isClassNameExistInHTMLElement:function(e,t){for(var i=e.className.split(" "),n=0;n<i.length;n++)if(i[n]==t)return!0;return!1},getElementsByClassName:function(e,t){var i,n,r,a=[];if("undefined"!=typeof e&&null!=e){if(e.getElementsByClassName){for(i=e.getElementsByClassName(t),n=i.length,r=0;n>r;r++)a.push(i[r]);return a}for(i=e.getElementsByTagName("*"),n=i.length,r=0;n>r;r++)if(i[r].className.indexOf(" ")>=0)for(var s=i[r].className.split(" "),o=0;o<s.length;o++)s[o]==t&&a.push(i[r]);else i[r].className==t&&a.push(i[r])}return a},getElementById:function(e,t){var i,n,r,a=null;if("undefined"!=typeof e&&null!=e)if(e.querySelector)a=e.querySelector("#"+t);else for(i=e.getElementsByTagName("*"),n=i.length,r=0;n>r;r++)if(i[r].id===t){a=i[r];break}return a},removeHTMLList:function(e){if(null!=e)for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])},pluralize:function(e,t,i){return"number"!=typeof e&&(e=0),i||(i=null),1>=e?t:i?i:t+"s"},capitalize:function(e){return e.replace(/[^\s-]+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},htmlDecode:function(e){return e&&(e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'"),e=e.replace(/&amp;/g,"&"),e=e.replace(/<br>/g,"\n"),e=e.replace(/<br\/>/g,"\n")),e},isItemExistInList:function(e,t){for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1},focused:function(e){e.exp=this,e.onfocus=e.onkeypress=function(){this.exp._focusFieldWithDefVal(this)},e.onblur=function(){this.exp._blurFieldWithDefVal(this)},e.value||(this._blurFieldWithDefVal(e),e.blur())},_focusFieldWithDefVal:function(e){e.className.indexOf("fFocused")<0&&(e.className+=" fFocused")},_blurFieldWithDefVal:function(e){e.value||(e.className=e.className.replaceAll(" fFocused",""))},addOrRemoveValueInArray:function(e,t){for(var i=[],n=0;n<e.length;n++)e[n]!=t&&i.push(e[n]);return i},isSupportSVG:function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},getDomObjectFromXMLString:function(e){e=e.replace(/<([a-zA-z]*)([^\/>]*)\/>/g,"<$1$2></$1>");var t;if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t},isParentFixed:function(e){return e.offsetParent?"fixed"==JSE.HTML.getStyle(e.offsetParent,"position")?!0:ViaMichelin.Api.Util.HTML.isParentFixed(e.offsetParent):!1},addEvent:function(e,t,i){window.addEventListener?e.addEventListener(t,i,!1):window.attachEvent&&e.attachEvent("on"+t,i)},removeEvent:function(e,t,i){window.addEventListener?e.removeEventListener(t,i,!1):window.attachEvent&&e.detachEvent("on"+t,i)},styleSupport:function(e){var t,i,n=e.charAt(0).toUpperCase()+e.slice(1),r=["Moz","Webkit","O","ms"],a=document.createElement("div");if(e in a.style)i=e;else for(var s=0;s<r.length;s++)if(t=r[s]+n,t in a.style){i=t;break}return a=null,i}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.HTML),ToJSEObject(ViaMichelin.Api.Util.HTML),JSEPackage("ViaMichelin.Api.Util.Image"),ViaMichelin.Api.Util.Image={_resizeImage:function(e,t,i){var n=$intVal(e.width),r=$intVal(e.height),a=n,s=r;if(n>0&&r>0){var o=n/r;i-r>=t-n?a>t&&(a=t,s=parseInt(t/o,10)):s>i&&(s=i,a=parseInt(o*i,10))}e.style.width=a+"px",e.style.height=s+"px"},resizeImage:function(e,t,i,n){if(e.complete)this._resizeImage(e,t,i);else{var r=new Image;r.onload=function(){if(r.width>0&&r.height>0){e.style.width=r.width+"px",e.style.height=r.height+"px";var a=r.width,s=r.height,o=a/s;a>t&&(a=t,s=a/o),s>i&&(s=i,a=s*o),e.style.width=Math.round(a)+"px",e.style.height=Math.round(s)+"px",n&&n()}},r.src=e.src}},replaceImage:function(e,t,i){var n=e.offsetWidth,r=e.offsetHeight;if(!n){var a=new Image;a.src=e.src,n=a.width,r=a.height}t>=n&&(e.style.left=Math.ceil((t-n)/2)+"px"),i>=r&&(e.style.top=Math.ceil((i-r)/2)+"px")},resizeAndReplaceAllImage:function(){for(var e=document.getElementsByTagName("img"),t=0;t<e.length;t++){var i=e[t];if(i.parentNode.className.indexOf("resizeImage")>=0&&i.src){var n=parseInt(i.parentNode.style.width,10),r=parseInt(i.parentNode.style.height,10);ViaMichelin.Api.Util.Image.resizeAndReplace(i,n,r)}}},resizeAndReplace:function(e,t,i){var n=new Image,r=e;n.onload=function(){var e=0;r.style.borderLeftWidth&&r.style.borderRightWidth&&(e=parseInt(r.style.borderLeftWidth,10)+parseInt(r.style.borderRightWidth,10));var n=0;r.style.borderTopWidth&&r.style.borderBottomWidth&&(n=parseInt(r.style.borderTopWidth,10)+parseInt(r.style.borderBottomWidth,10));var a=$intVal(this.width)+e,s=$intVal(this.height)+n,o=a,l=s;if(a>0&&s>0){var c=a/s;i-s>=t-a&&a>t&&(o=t-e,l=parseInt(t/c,10)-n),l>i&&(l=i-e,o=parseInt(c*i,10)-n)}r.style.width=o+"px",r.style.height=l+"px",i-n>=l&&(r.style.marginTop=Math.ceil((i-n-l)/2)+"px"),t-e>=o&&(r.style.marginLeft=Math.ceil((t-e-o)/2)+"px"),r.style.display="",r.style.visibility="visible"},n.src=r.src},_ImageTransparencyForIE6ByClassName:function(e,t){if(navigator.isIE6){null==t&&(t=document);for(var i=ViaMichelin.Api.Util.HTML.getElementsByClassName(t,e),n=0;n<i.length;n++)i[n].style.width=i[n].offsetWidth,i[n].style.height=i[n].offsetHeight,i[n].style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+i[n].src+'", sizingMethod="scale")',i[n].src="/img/ihm/cmn/s.gif"}}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.Image),ToJSEObject(ViaMichelin.Api.Util.Image),JSEPackage("ViaMichelin.Api.Util.LandList"),JSEImportApi("JSE.HTML"),JSEImportApi("ViaMichelin.Api.Util.Translation"),JSEImportTrl("ViaMichelin.Api.Trl.LandList"),ViaMichelin.Api.Util.LandList={getLandList:function(e,t){var i=new ViaMichelin.Api.Util.Translation(ViaMichelin.Api.Trl.LandList);this.initLandList(e,i.getValue("MapLandList"),t)},getItineraryLandList:function(e,t){var i=new ViaMichelin.Api.Util.Translation(ViaMichelin.Api.Trl.LandList);this.initLandList(e,i.getValue("ItineraryLandList"),t)},getISOLandList:function(e,t){var i=new ViaMichelin.Api.Util.Translation(ViaMichelin.Api.Trl.LandList);this.initISOLandList(e,i.getValue("MapLandList"),t)},getISOItineraryLandList:function(e,t){var i=new ViaMichelin.Api.Util.Translation(ViaMichelin.Api.Trl.LandList);this.initISOLandList(e,i.getValue("ItineraryLandList"),t)},initLandList:function(e,t,i){var n;if(i||(i="1424"),$_id(e)){for(e=$_id(e),n=0;n<t.length;n++){var r=new Option(t[n][1],t[n][0]);e.options[e.options.length]=r}if(null!=i)for(n=0;n<e.options.length;)e.options[n].value==i&&(e.selectedIndex=n,n=e.options.length),n++}},initISOLandList:function(e,t,i){var n;if(i||(i="FRA"),$_id(e)){for(e=$_id(e),n=0;n<t.length;n++){var r=new Option(t[n][1],ViaMichelin.Api.Util.Country.getISOCodeFromCountryCode(t[n][0]));e.options[e.options.length]=r}if(null!=i)for(n=0;n<e.options.length;)e.options[n].value==i&&(e.selectedIndex=n,n=e.options.length),n++}},isUK:function(){var e=JSE.HTML.getClassName(document.body);return e?e.indexOf("en-GB")>-1:!1},isFrance:function(){var e=JSE.HTML.getClassName(document.body);return e?e.indexOf("fr-FR")>-1:!1}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.LandList),ToJSEObject(ViaMichelin.Api.Util.LandList),JSEPackage("ViaMichelin.Api.Util.Other"),JSEImportApi("ViaMichelin.Api.Model.MUPPoi"),JSEImportApi("ViaMichelin.Api.Model.MPMPoi"),JSEImportApi("ViaMichelin.Api.Model.Destination"),JSEImportApi("ViaMichelin.Api.Constants.MyVM"),JSEImportApi("ViaMichelin.Api.Constants.MPMPoi"),JSEImportApi("ViaMichelin.Api.Util.Css"),ViaMichelin.Api.Util.Other={addDaysToDate:function(e,t){var i="";if(e){var n=e.split("/"),r=new Date(n[2],1*n[1]-1,1*n[0]+t),a=r.getDate();a=(10>a?"0":"")+a;var s=r.getMonth()+1;s=(10>s?"0":"")+s;var o=r.getYear();o=(200>o?1900:0)+o,i=a+"/"+s+"/"+o}return i},addString:function(e,t,i){return("undefined"==typeof e||null==e)&&(e=""),("undefined"==typeof i||null==i)&&(i=" "),ViaMichelin.Api.Util.Other.isStringExist(e,t,i)||(e=e+i+t),e},closer:function(e,t){var i=e%t,n=t-i;return i>=n?n+e:e-i},parseDate:function(e){var t,i=e.split(" "),n=i[0].split("-"),r=new Date(n[0],n[1]-1,n[2]);return i[1]&&(t=i[1].split(":")),t&&(t[0]&&r.setHours(t[0]),t[1]&&r.setMinutes(t[1]),t[2]&&r.setSeconds(t[2])),r},dateFormat:function(e,t){if(t||(t=new Date),"number"==typeof t){var i=new Date;i.setTime(t),t=i}else"string"==typeof t&&(t=new Date(ViaMichelin.Api.Util.Other.parseDate(t)),isNaN(t)&&(t=new Date(t)));var n=t.getYear();1e3>n&&(n+=1900);var r=t.getHours(),a=t.getDate(),s=t.getMonth()+1,o=t.getMinutes(),l=t.getSeconds(),c=new RegExp("(d|m|Y|H|i|s)","g"),d=[];return d.d=10>a?"0"+a:a,d.m=10>s?"0"+s:s,d.Y=n,d.Y=n,d.H=10>r?"0"+r:r,d.i=10>o?"0"+o:o,d.s=10>l?"0"+l:l,e.replace(c,function(e){return e in d?d[e]:e.slice(1,e.length-1)})},existsInArray:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},formatDateNumber:function(e){return 10>e?"0"+e:e},formattingDistance:function(e){return 1e3>=e?"1 km":e>1e3?parseInt(e/1e3,10)+" km":""},formattingPunctuation:function(e,t,i,n){var r="";return r+="fra"==n.toLowerCase()?t+e+" "+i:t+" "+e+" "+i},getInfosImage:function(e,t,i){try{var n={width:0,height:0},r=new Image;r.onload=function(){r.width>0&&r.height>0&&(n.size={width:r.width,height:r.height},t.call(i,n))},r.src=e}catch(a){alert("Exc:"+a)}},getMousePosition:function(e){e=window.event||e;var t,i;return navigator.isMozilla?(t=e.pageX,i=e.pageY):navigator.isSafari?(t=e.pageX+document.body.offsetLeft,i=e.pageY+document.body.offsetTop):(t=e.clientX+document.documentElement.scrollLeft,i=e.clientY+document.documentElement.scrollTop),{x:t,y:i}},isStringExist:function(e,t,i){return("undefined"==typeof i||null==i)&&(i=" "),e=i+e+i,t=i+t+i,-1!=e.indexOf(t)},makeDist:function(e,t){if(!e)return"";"number"!=typeof e&&(e=parseInt(e,10));var i;return i=t&&-1===t.indexOf("&nbsp;")?"&nbsp;"+t:t,0===e||"undefined"==typeof e?"":"mi"==t.toLowerCase()?(e=1e3*e,100>e?"<0.1"+i:2001>e?this.closer(e,100)/1e3+i:10001>e?this.closer(e,500)/1e3+i:this.closer(e,1e3)/1e3+i):100>e?"<0.1"+i:2001>e?Math.round(this.closer(e,100)/100)/10+i:10001>e?Math.round(this.closer(e,500)/100)/10+i:Math.round(this.closer(e,1e3)/1e3)+i},makeHour:function(e){if(0===e)return"nld"==ViaMichelin.Api.Constants.System.ApiLang?"00.00&nbsp;u":"00h00";for(var t=e,i=0,n=0;t>=60;)i+=1,t-=60;for(;i>=60;)n+=1,i-=60;return"nld"==ViaMichelin.Api.Constants.System.ApiLang?(10>n?"0"+n:n)+"."+(10>i?"0"+i:i)+"&nbsp;u":(10>n?"0"+n:n)+"h"+(10>i?"0"+i:i)},mixAttributes:function(e,t){if($isNotEmpty(t))for(var i in t)if("object"!=typeof t[i]||$isDomElement(t[i]))e[i]=t[i];else if($isDefined(e[i]))if(t[i]instanceof Array)e[i]=t[i].slice(0);else{$isNotEmpty(e[i])||(e[i]={});for(var n in t[i])e[i][n]=t[i][n]}else e[i]=t[i]},rtrim:function(e,t){return t=t||"\\s",e.replace(new RegExp("["+t+"]+$","g"),"")},setISO8601:function(e){var t=/([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/,i=e.match(t),n=0,r=new Date(i[1],0,1);return i[3]&&r.setMonth(i[3]-1),i[5]&&r.setDate(i[5]),i[7]&&r.setHours(i[7]),i[8]&&r.setMinutes(i[8]),i[10]&&r.setSeconds(i[10]),i[12]&&r.setMilliseconds(1e3*Number("0."+i[12])),i[14]&&(n=60*Number(i[16])+Number(i[17]),n*="-"==i[15]?1:-1),n-=r.getTimezoneOffset(),Number(r)+60*n*1e3},testPropValue:function(e){return e&&" "!=e&&"0m"!=e},trim:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},templateProcess:function(e,t){var i=e;if(!$isDefined(i))return"";$isDefined(t)||(t="DEFAULT");for(var n,r,a,s,o=i.indexOf("##START_",0);-1!=o;)i.indexOf("##START_"+t+"##",o)==o?(i=i.replace("##START_"+t+"##",""),i=i.replace("##END_"+t+"##","")):(n=i.indexOf("##",o+1),r=i.substring(o+8,n),n=i.indexOf("##END_"+r+"##"),a=i.substring(0,o),s=i.substring(n+r.length+8,i.length),i=a+s),o=i.indexOf("##START_",o);return i}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.Other),ToJSEObject(ViaMichelin.Api.Util.Other),JSEPackage("ViaMichelin.Api.Util.Poi"),ViaMichelin.Api.Util.Poi={SIMPLE_POI_HOTEL:"POI HOTEL",SIMPLE_POI_RESTAURANT:"POI RESTAURANT",SIMPLE_POI_TOURISM:"POI TOURISM",SIMPLE_POI_DEFAULT:"POI DEFAULT",drawPoiMap:function(e,t,i,n){var r="",a='onMouseOver="this.parentNode.style.zIndex=1000;" onmouseout="this.parentNode.style.zIndex=2"';return"undefined"!=typeof i&&(r="ui-picto-poi"+ViaMichelin.Api.Util.HTML.capitalize(i)),"undefined"!=typeof n&&("undefined"==typeof n.over||n.over||(a="")),'<div class="ui-picto-poi '+r+'" '+a+">"+(navigator.isIE6?'<img src="'+ViaMichelin.Api.Constants.System.ApiImgPath+'all/s.gif" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\''+ViaMichelin.Api.Constants.System.ApiImgPath+"/all/pastille/"+t+"_big_shaded_blazon.png', sizingMethod='scale');\" />":'<img src="'+ViaMichelin.Api.Constants.System.ApiImgPath+"all/pastille/"+t+'_big_shaded_blazon.png" />')+"<div>"+e+"</div></div>"},drawPoiMapGreen:function(e,t,i){return this.drawPoiMap(e,"green",t,i)},drawPoiMapRed:function(e,t,i){return this.drawPoiMap(e,"red",t,i)},drawPoiMapBlack:function(e,t,i){return this.drawPoiMap(e,"black",t,i)},drawPoiMapClassified:function(e,t,i){return this.drawPoiMap(e,"orange",t,i)},drawPoiMapYellow:function(e,t,i){return this.drawPoiMap(e,"yellow",t,i)},drawPoiMapBlue:function(e,t,i){return this.drawPoiMap(e,"blue",t,i)},drawPoiMapWhite:function(e,t,i){return this.drawPoiMap(e,"white",t,i)},drawPoiMapGreenPhoto:function(e,t,i){var n=!1;e.photoURLs&&e.photoURLs[0]&&(n=!0);var r=0;return e.metaNums&&e.metaNums[0]&&(r=e.metaNums[0]),n?'<div style="top:0px;left:0px;border:1px outset black;background-color:#FFFFFF;padding:1px;margin:0" onMouseOver="this.parentNode.style.zIndex=1000;" onmouseout="this.parentNode.style.zIndex=2"><img style="width:26px;height:27px;margin:0px;padding:0px;border:none;display:block;" src="'+e.photoURLs[0]+'" onload="ViaMichelin.Api.Util.resizeImageByStars(this,26,27,'+r+');" onMouseOver="ViaMichelin.Api.Util.onMouseOverResizeAnimate(this, this.parentNode);" onmouseout="ViaMichelin.Api.Util.onMouseOutResizeAnimate(this, this.parentNode)"/></div>':ViaMichelin.Api.Util.Poi.drawPoiMap(t,"green",i)},drawMiniPastilleVerte:function(e){return'<div class="GreenSmallDisc"/>'+e+"</div>"},drawMiniPastilleNoire:function(e){return'<div class="BlackSmallDisc"/>'+e+"</div>"},drawMiniPastilleJaune:function(e){return'<div class="YellowSmallDisc"/>'+e+"</div>"},drawMiniPastilleRouge:function(e){return'<div class="RedSmallDisc"/>'+e+"</div>"},drawMiniPastilleBleue:function(e){return'<div class="BlueSmallDisc"/>'+e+"</div>"},drawMiniPastilleGrise:function(e){return'<div class="GreySmallDisc"/>'+e+"</div>"},drawMiniPastilleBNP:function(){return'<div class="miniPastilleBNP"/></div>'},drawCartePastilleBrandPlacementPrint:function(e){return'<div class="cartePastillePOD"><img src="/client_data/'+e.clientPath+"/"+ViaMichelin.Api.Constants.System.ApiLang+"/map_icon/mapiconpoi"+e.iconsId+'.gif" class="cartePastillePODImg"/></div>'},onMouseOverResizeAnimate:function(){},onMouseOutResizeAnimate:function(){},resizeImageByStars:function(e,t,i,n){var r=[1,1.5,2,3,5];parseInt(n,10)>4&&(n=1);var a=r[n],s=new Image;if(s.src=e.src,s.width>0&&s.height>0){e.style.width=s.width+"px",e.style.height=s.height+"px",e.style.position="relative";var o=s.width,l=s.height,c=o/l;i-l>=t-o?o>t&&(e.style.width=parseInt(t*a,10)+"px",e.style.height=parseInt(t*a/c,10)+"px"):l>i&&(e.style.height=parseInt(i*a,10)+"px",e.style.width=parseInt(c*i*a,10)+"px")}e.parentNode&&e.parentNode.parentNode&&e.parentNode.parentNode.className.indexOf("ui-picto-poi")<0&&!navigator.isIE&&(e.parentNode.style.position="relative")},drawRatingPoi:function(e){var t,i,n,r="",a=ViaMichelin.Api.Util.getSimpleTypePoi(e);if(null!=e)switch(a){case ViaMichelin.Api.Util.SIMPLE_POI_HOTEL:e.icons&&e.icons.length>0&&e.icons[2]&&(t=e.icons[2],i=e.icons[3].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),n=e.icons[3].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),r='<img src="'+t+'" alt="'+i+'" title="'+n+'"/>');break;case ViaMichelin.Api.Util.SIMPLE_POI_RESTAURANT:e.icons&&e.icons.length>0&&(e.icons[2]||e.icons[4])&&(e.icons[2]&&(t=e.icons[2],i=e.icons[3].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),n=e.icons[3].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),r+='<img src="'+t+'" alt="'+i+'" title="'+n+'"/>'),e.icons[4]&&(t=e.icons[4],i=e.icons[5].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),n=e.icons[5].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),r+='<img src="'+t+'" alt="'+i+'" title="'+n+'"/>'));break;case ViaMichelin.Api.Util.SIMPLE_POI_TOURISM:e.icons&&e.icons.length>0&&e.icons[2]&&(t=e.icons[2],i=e.icons[3].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),n=e.icons[3].replace(/\r/g,"").replace(/\n/g,"").replace(/"/g,"&quot;"),r+='<img src="'+t+'" alt="'+i+'" title="'+n+'"/>')}return r},getType:function(e){var t;if(ViaMichelin.Api.Constants.System.Poi){for(t=0;t<ViaMichelin.Api.Constants.System.Poi.Hotel.length;t++)if(ViaMichelin.Api.Constants.System.Poi.Hotel[t]==e)return"hotel";for(t=0;t<ViaMichelin.Api.Constants.System.Poi.Restaurant.length;t++)if(ViaMichelin.Api.Constants.System.Poi.Restaurant[t]==e)return"restaurant";for(t=0;t<ViaMichelin.Api.Constants.System.Poi.Tourism.length;t++)if(ViaMichelin.Api.Constants.System.Poi.Tourism[t]==e)return"tourism"}return"default"}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.Poi),ToJSEObject(ViaMichelin.Api.Util.Poi),JSEPackage("ViaMichelin.Api.Util.URL"),JSEImportTrad("ViaMichelin.Api.Trad.Util.URL"),ViaMichelin.Api.Util.URL={generateURL:function(e){var t=ViaMichelin.Api.Constants.System.ApiVMWebRoot+"/web",i=ViaMichelin.Api.Trad.Util.URL.MAP_COMMAND;return null!=e?"MAP"==e.context?t+=ViaMichelin.Api.Trad.Util.URL.MAP_COMMAND+(e.land?"/"+encodeURIComponent(encodeURIComponent(e.land)):"")+(e.city?"/"+encodeURIComponent(encodeURIComponent(e.city)):"")+(e.addr?"/"+e.addr:"")+"?"+this.getMapParams(e.addrObj):"POI"==e.context?t+=ViaMichelin.Api.Trad.Util.URL.DATASHEET_COMMAND+(e.id?"/"+e.id:"")+(e.productId?"/"+e.productId:"")+(e.name?"/"+e.name:""):"POILIST"==e.context?("HOTELS"==e.searchType?t+=ViaMichelin.Api.Trad.Util.URL.HOTELS_COMMAND:"RESTOS"==e.searchType||"GR"==e.searchType?t+=ViaMichelin.Api.Trad.Util.URL.RESTAURANTS_COMMAND:"TOURISM"==e.searchType||"G_VERT"==e.searchType?t+=ViaMichelin.Api.Trad.Util.URL.TOURISM_COMMAND:"KEYWORDS"==e.searchType&&(t+=ViaMichelin.Api.Trad.Util.URL.TOURISM_COMMAND),e.loc&&(t+=(e.loc.country?"/"+e.loc.country:"")+(e.loc.city?"/"+e.loc.city:"")+(e.loc.address?"/"+e.loc.address:""))):"ITI"==e.context?(t+=ViaMichelin.Api.Trad.Util.URL.ITINERARY_COMMAND,e&&e.start&&($isDefined(e.start.id)||$isDefined(e.dest.id)||$isDefined(e.stepA.id))?($isDefined(e.start.id)&&(t+="?strDepartureId="+e.start.id+"&strDepartureProductId="+e.start.productId),$isDefined(e.dest.id)&&(t+="?strArrivalId="+e.dest.id+"&strArrivalProductId="+e.dest.productId),e.stepA&&$isDefined(e.stepA.id)&&(t+="?strStep1Id="+e.stepA.id+"&strStep1ProductId="+e.stepA.productId)):($isDefined(e.start)&&(t+=(e.start.land?"/"+encodeURIComponent(encodeURIComponent(e.start.land)):"")+(e.start.city?"/"+encodeURIComponent(encodeURIComponent(e.start.city)):"")+(e.start.addr?"/"+e.start.addr:"")),$isDefined(e.dest)&&(t+=(e.dest.land?"/"+encodeURIComponent(encodeURIComponent(e.dest.land)):"")+(e.dest.city?"/"+encodeURIComponent(encodeURIComponent(e.dest.city)):"")+(e.dest.addr?"/"+e.dest.addr:"")),$isDefined(e.stepA)&&(t+="/via"+(e.stepA.land?"/"+encodeURIComponent(encodeURIComponent(e.stepA.land)):"")+(e.stepA.city?"/"+encodeURIComponent(encodeURIComponent(e.stepA.city)):"")+(e.stepA.addr?"/"+e.stepA.addr:"")),$isDefined(e.stepB)&&(t+=(e.stepB.land?"/"+encodeURIComponent(encodeURIComponent(e.stepB.land)):"")+(e.stepB.city?"/"+encodeURIComponent(encodeURIComponent(e.stepB.city)):"")+(e.stepB.addr?"/"+e.stepB.addr:""))),$isNotEmpty(e.params)&&(t+="?"+e.params)):t+=i:t+=i,t},generateItiURL:function(e,t,i,n){var r=this.generateItiParamURL(e,t,i,n);return this.generateURL(r)},generateMapURL:function(e){var t=this.generateMapParamURL(e);return this.generateURL(t)},generatePOIListURL:function(e){var t=this.generatePOIListParamURL(e);return this.generateURL(t)},generatePOIURL:function(e){var t=this.generatePOIParamURL(e);return this.generateURL(t)},generateItiParamURL:function(e,t,i,n){var r={};return r.context="ITI",r.start={},r.dest={},$isDefined(e)&&(r.start.land=e.country,r.start.city=e.city,r.start.addr=e.address,r.start.id=e.id,r.start.productId=e.productId),$isDefined(t)&&(r.dest.land=t.country,r.dest.city=t.city,r.dest.addr=t.address,r.dest.id=t.id,r.dest.productId=t.productId),$isDefined(i)&&(r.stepA={},r.stepA.land=i.country,r.stepA.city=i.city,r.stepA.addr=i.address,r.stepA.id=i.id,r.stepA.productId=i.productId),$isDefined(n)&&(r.stepB={},r.stepB.land=n.country,r.stepB.city=n.city,r.stepB.addr=n.address,r.stepB.id=n.id,r.stepB.productId=n.productId),r},generateMapParamURL:function(e){var t={};return t.context="MAP",t.land=e.country,t.city=e.city,t.addr=e.address,t.addrObj=e,t},generatePOIListParamURL:function(e){return e.context="POILIST",e},generatePOIParamURL:function(e){return e.context="POI",e},getMapParams:function(e){var t="",i=null;if($isDefined(i)){var n=i.getCenter().lon+"*"+i.getCenter().lat,r=parseInt(i.width,10),a=parseInt(i.height,10);t+="empriseW="+r+"&empriseH="+a+"&mapId="+i.getMapId()+"&zoomLevel="+i.getZoomLevel()+"strCoord="+n}else $isDefined(e)&&$isDefined(e.longitude)&&$isDefined(e.latitude)?t+="strCoord="+e.longitude+"*"+e.latitude:$isDefined(e)&&$isDefined(e.coords)&&$isDefined(e.coords.lon)&&$isDefined(e.coords.lat)&&(t+="strCoord="+e.coords.lon+"*"+e.coords.lat);return t},getCanonicalUrl:function(){for(var e="",t=document.getElementsByTagName("link"),i=0,n=0;i<t.length&&1>n;i++)"canonical"==t[i].rel&&(e=t[i].href,n++);return e}},ViaMichelin.Api.Util.extend(ViaMichelin.Api.Util.URL),ToJSEObject(ViaMichelin.Api.Util.URL);