JSEPackage("ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.LayerTitle"),JSEImportApi("ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.Title"),ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.LayerTitle=function(){},ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.LayerTitle.prototype={_title:"",_titleHandlersAdded:!1,bindTitle:function(){return this._titleHandlersAdded||(this._branchTitleEvents("on"),this._titleHandlersAdded=!0,this.plugWire("add",this._listenMapEvents,this),this.plugWire("remove",this._unbindTitle,this)),this},_unbindTitle:function(){return this._branchTitleEvents("off"),this._map.unplugWire("moveend",this._zoomendRemoveTitle,this),this._map.unplugWire("zoomstart",this._zoomstartRemoveTitle,this),this._titleHandlersAdded=!1,this._removeTitle(),this},_listenMapEvents:function(){this.unplugWire("add",this._listenMapEvents,this),this._map.plugWire("moveend",this._zoomendRemoveTitle,this),this._map.plugWire("zoomstart",this._zoomstartRemoveTitle,this)},_zoomendRemoveTitle:function(){this._zoomstart=!1,this._removeTitle()},_zoomstartRemoveTitle:function(){this._zoomstart=!0,this._removeTitle()},_branchTitleEvents:function(t){var e,i=[{name:"PoiOutEvent",method:this._poiOutEvent,ref:this},{name:"PoiOverEvent",method:this._poiOverEvent,ref:this},{name:"PoiMoveEvent",method:this._poiMoveEvent,ref:this}];e="off"===t?"unplugWire":"plugWire";for(var s=0;s<i.length;s++)this[e](i[s].name,i[s].method,i[s].ref)},_poiMoveEvent:function(t){this._title&&this._title.setLatLon(t.latlon)},_poiOutEvent:function(){this._removeTitle()},_poiOverEvent:function(t){if(this._title&&this._removeTitle(),!this._zoomstart){var e=t.poi.desc;this._createTitle(),this._title.setContent(e),this._title.setLatLon(t.latlon),this._title.addTo(this._map)}},_createTitle:function(){this._title=new ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.Title},_removeTitle:function(){this._title&&(this._map.removeLayer(this._title),this._title=null)}};