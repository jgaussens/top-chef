JSEPackage("ViaMichelin.Api.MMap.Module.Traffic.Layer.RefreshTraffic"),ViaMichelin.Api.MMap.Module.Traffic.Layer.RefreshTraffic=function(i,e,t){this._options=i,this._map=e,this._callback=t,this._delay=i.getRefreshDelay(),this._delay&&(this.start(),this._map.plugWire("zoomend",this.restart,this),this._map.plugWire("unload",this.stop,this))},ViaMichelin.Api.MMap.Module.Traffic.Layer.RefreshTraffic.prototype={restart:function(){this._refreshDelayTimer&&this.stop(),this.start()},start:function(){var i=this;this._refreshDelayTimer=setInterval(function(){i._callback()},1e3*this._delay)},stop:function(){this._refreshDelayTimer&&(clearInterval(this._refreshDelayTimer),this._refreshDelayTimer=null)},release:function(){this._delay&&(this.stop(),this._map.unplugWire("zoomend",this.restart,this),this._map.unplugWire("unload",this.stop,this))}},ViaMichelin.Api.MMap.Module.Traffic.Layer._refreshTraffic=function(i,e,t){return new ViaMichelin.Api.MMap.Module.Traffic.Layer.RefreshTraffic(i,e,t)};