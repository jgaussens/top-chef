JSEPackage("ViaMichelin.Api.UI.Core.Overlay"),JSEImportApi("JSE.HTML.UIComponent"),JSEImportApi("ViaMichelin.Api.UI.Core.OverlaysManager"),ViaMichelin.Api.UI.Core.Overlay=function(e,t){this.extend(JSE.HTML.UIComponent),this.prepare(),this.width=e,this.offsetTop=t,this.x=document.documentElement&&document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,this.y=document.documentElement&&document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,window.scrollTo(0,0)},ViaMichelin.Api.UI.Core.Overlay.prototype={JSEwireHub:{onClose:[],onBeforeClose:[]},x:0,y:0,width:0,offsetTop:0,resizing:!1,underLayer:{JSEtype:"JSE.HTML.UIComponent",JSEwires:[]},HTMLElementContainer:{JSEtype:"JSE.HTML.UIComponent",JSEwires:[]},show:function(e){this.parent=e,ViaMichelin.Api.UI.Core.OverlaysManager.registerOverlay(this,this.close);var t=document.documentElement.scrollHeight;document.documentElement.clientHeight>t&&(t=document.documentElement.clientHeight),navigator.isIE6?(this.underLayer.HTMLElement.style.width="100%",this.underLayer.HTMLElement.style.height=t+"px",this.underLayer.HTMLElement.style.position="absolute"):(this.underLayer.HTMLElement.style.width="100%",this.underLayer.HTMLElement.style.height="100%",this.underLayer.HTMLElement.style.position="fixed"),this.underLayer.HTMLElement.className="sUnderLayer",ViaMichelin.Api.UI.Core.OverlaysManager.zIndexs++,this.underLayer.HTMLElement.style.zIndex=ViaMichelin.Api.UI.Core.OverlaysManager.zIndexs,this.underLayer.HTMLElement.style.top="0px",this.underLayer.HTMLElement.style.left="0px",this.underLayer.plugWire(new JSEWire("HTMLEvent_click",this.close,this)),this.HTMLElementContainer.plugWire(new JSEWire("HTMLEvent_click",this.close,this)),this.plugWire(new JSEWire("HTMLEvent_click",this.cancelBubbling,this)),this.HTMLElementContainer.HTMLElement.style.position="absolute",ViaMichelin.Api.UI.Core.OverlaysManager.zIndexs++,this.HTMLElementContainer.HTMLElement.style.zIndex=ViaMichelin.Api.UI.Core.OverlaysManager.zIndexs,this.HTMLElementContainer.HTMLElement.style.top=this.offsetTop+"px",this.HTMLElementContainer.HTMLElement.style.left=0,this.HTMLElementContainer.HTMLElement.style.textAlign="center",this.HTMLElementContainer.HTMLElement.style.width="100%",this.HTMLElement.style.margin="0 auto 0 auto",this.HTMLElement.style.textAlign="left",this.HTMLElement.style.width=this.width+"px",this.HTMLElement.style.position="relative",this.HTMLElementContainer.HTMLElement.appendChild(this.HTMLElement),this.parent.appendChild(this.underLayer.HTMLElement),this.parent.appendChild(this.HTMLElementContainer.HTMLElement),this._addContent(),this.stimulate("onAppendChild")},resize:function(){try{if(!this.resizing){this.resizing=!0;var e=document.documentElement.scrollHeight;document.documentElement.clientHeight>e&&(e=document.documentElement.clientHeight),navigator.isIE6&&(this.underLayer.HTMLElement.style.height=e+"px"),this.resizing=!1}}catch(t){}},showSelectBoxes:function(){if(navigator.isIE6)for(var e=this.HTMLElement.getElementsByTagName("select"),t=0;t<e.length;t++)e[t].style.visibility="visible"},close:function(){this.stimulate("onBeforeClose"),window.scrollTo(this.x,this.y),this.stimulate("onClose"),this.isolate(),this.release(),ViaMichelin.Api.UI.Core.OverlaysManager.unregisterOverlay(this,this.close)},release:function(){$isDefined(this.parent)&&this.parent.removeChild(this.underLayer.HTMLElement),$isDefined(this.underLayer)&&(this.underLayer.isolate(),this.underLayer.release(),this.underLayer=null),$isDefined(this.parent)&&this.parent.removeChild(this.HTMLElementContainer.HTMLElement),this.HTMLElementContainer.isolate(),this.HTMLElementContainer.release(),this.parent=null,this.clearDOM()}};