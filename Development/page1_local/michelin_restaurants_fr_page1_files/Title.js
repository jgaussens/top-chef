JSEPackage("ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.Title"),JSEImportApi("ViaMichelin.Api.MMap.Core.Layer"),JSEImportApi("ViaMichelin.Api.MMap.Core.Geo.LatLon"),ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.Title=function(){ViaMichelin.Api.Util.Object.extend(this,ViaMichelin.Api.MMap.Core.Layer)},ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.Title.prototype={_content:null,_latlon:null,options:{pane:"popupPane"},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ViaMichelin.Api.Util.Dom.addClass(this._container,"mmap-zoom-animated")),this.getPane().appendChild(this._container),this.update()},onRemove:function(){this._container.parentNode&&(this._container.parentNode.removeChild(this._container),this._container=null)},setLatLon:function(t){return this._latlon=ViaMichelin.Api.MMap.Core.Geo.latLon(t),this._map&&(this._updatePosition(),this._adjustPan()),this},setContent:function(t){return this._content=t,this.update(),this},toString:function(){return"[ViaMichelin.Api.MMap.Module.ClusteredPois.Layer.Title]"},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_adjustPan:function(){},_initContainer:function(){this._container=document.createElement("div"),this._container.style.width="600px",this._container.style.position="absolute",this._titleNode=document.createElement("div"),this._titleNode.className="vmapi-pois-title",this._container.appendChild(this._titleNode)},_updateContent:function(){if(this._content){var t=this._titleNode;if("string"==typeof this._content)t.innerHTML=this._content;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(this._content)}this._containerWidth=this._titleNode.offsetWidth,this._containerHeight=this._titleNode.offsetHeight,this.stimulate("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLonToLayerPoint(this._latlon),i=ViaMichelin.Api.MMap.Core.Geometry.point([0,0]);this._zoomAnimated?ViaMichelin.Api.Util.Dom.setPosition(this._container,t):i=i.add(t);var e=this._containerBottom=-this._containerHeight-i.y-12,n=this._containerLeft=+i.x+12;this._container.style.bottom=e+"px",this._container.style.left=n+"px"}}};